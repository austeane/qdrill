# Ticket 05: Review and Ensure Sanitization for all `{@html}` Usage

**Priority:** High

**Description:** The `{@html}` directive is used in several Svelte components to render HTML content directly (e.g., drill descriptions, practice plan descriptions). This can create Cross-Site Scripting (XSS) vulnerabilities if the HTML content originates from user input and is not properly sanitized before being stored and rendered.

**Affected Files:**

*   [`src/routes/drills/+page.svelte`](src/routes/drills/+page.svelte) (`brief_description`)
*   [`src/routes/drills/[id]/+page.svelte`](src/routes/drills/[id]/+page.svelte) (`detailed_description`)
*   [`src/routes/practice-plans/[id]/+page.svelte`](src/routes/practice-plans/[id]/+page.svelte) (`practicePlan.description`)
*   Potentially others if TinyMCE output is rendered elsewhere.

**Related Notes:**

*   [`code-review/drill-notes.md`](code-review/drill-notes.md)
*   [`code-review/practice-plan-notes.md`](code-review/practice-plan-notes.md)
*   [`code-review/holistic-summary.md`](code-review/holistic-summary.md)

**Action Required:**

1.  Identify all sources of HTML content rendered using `{@html}`. This primarily includes content generated by the TinyMCE editor (descriptions).
2.  Verify the sanitization process for this content:
    *   **Where is sanitization occurring?** Is it done server-side before saving to the database (preferred)? Is TinyMCE configured to produce safe HTML?
    *   **What library/method is used?** (e.g., `DOMPurify`, server-side HTML parsing libraries).
    *   **Is the sanitization configuration robust?** Does it prevent known XSS vectors (e.g., `<script>` tags, `onerror` attributes, malicious `href` values)?
3.  Implement server-side sanitization before saving any user-generated rich text content to the database if not already present and robust.
4.  Configure TinyMCE appropriately to minimize potential risks during input.
5.  Thoroughly test the sanitization process against known XSS attack patterns. 